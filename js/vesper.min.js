function zMute(){zPlayer.muted=!zPlayer.muted}function zPlayPause(){if(isPlaying){document.getElementById("play").innerHTML="<icon>play</icon>";zPlayer.pause()}else{document.getElementById("play").innerHTML="<icon>pause</icon>";zPlayer.play()}wavesurfer.playPause();isPlaying=!isPlaying}function zStop(){document.getElementById("play").innerHTML="<icon>play</icon>";zPlayer.pause();zPlayer.currentTime=0;isPlaying=false;zTimeUpdate()}function zVolumeUp(){zPlayer.volume+=0.1}function zVolumeDown(){zPlayer.volume-=0.1}function zTimeUpdate(){document.getElementById("currenttime").innerHTML=convertTime(Math.floor(zPlayer.currentTime));document.getElementById("totaltime").innerHTML=convertTime(Math.floor(zPlayer.duration));document.getElementById("time").value=Math.floor(zPlayer.currentTime);document.getElementById("time").max=Math.floor(zPlayer.duration);if(zPlayer.currentTime>=zPlayer.duration){zAlbumArt()}}function convertTime(b){var a=Math.floor(b/3600);var c=Math.floor(b%3600/60);b=b%60;if(b<10){b="0"+b}if(c<10){c="0"+c}if(a!=0){return a+":"+c+":"+b}else{return c+":"+b}}function zAlbumArt(){var g=zPlayer.getAttribute("data-artist");var c=zPlayer.getAttribute("data-album");var j="http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key="+lastfmAPIkey+"&artist="+g+"&album="+c;var f,b,d,h,a;if(window.XMLHttpRequest){f=new XMLHttpRequest}else{f=new ActiveXObject("Microsoft.XMLHTTP")}f.onreadystatechange=function(){if(f.readyState==4&&f.status==200){d=f.responseXML.documentElement.getElementsByTagName("album");for(a=0;a<d.length;a++){h=d[a].getElementsByTagName("image");try{b="<div style='background-image: url("+h[1].firstChild.nodeValue+");background-repeat: no-repeat;'></div>"}catch(i){}}document.getElementById("art").innerHTML=b}};f.open("GET",j,true);f.send()}var lastfmAPIkey="bf7528310d7bdbb8584e57244cdb549b";var zPlayer=document.getElementById("player");var filename=document.getElementById("player").getAttribute("src");var isPlaying=false;var wavesurfer=Object.create(WaveSurfer);document.addEventListener("DOMContentLoaded",function(){wavesurfer.init({container:document.querySelector(".waveform"),fillParent:true,markerColor:"rgba(0, 0, 0, 0.5)",frameMargin:0.1,maxSecPerPx:parseFloat(location.hash.substring(1)),loadPercent:true,waveColor:"darkgray",progressColor:"whitesmoke",loaderColor:"transparent",cursorWidth:0});wavesurfer.load(document.getElementById("player").src)});ID3.loadTags(filename,function(){var a=ID3.getAllTags(filename);document.getElementById("artist").innerHTML="Artist: "+a.artist;document.getElementById("player").setAttribute("data-artist",a.artist);document.getElementById("album").innerHTML="Album: "+a.album;document.getElementById("player").setAttribute("data-album",a.album);zAlbumArt()},{tags:["artist","album"]});